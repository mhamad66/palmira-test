<app-navbar></app-navbar>
<app-menu></app-menu>
<div class="container-fluid main">
  <div class="row">
    <div class="col-sm-12 col-md-12 col-lg-2 mb-3">
      <app-sidebar></app-sidebar>
    </div>
    <div class="col-sm-12 col-md-12 col-lg-10 mb-3">
      <app-breadcrumb></app-breadcrumb>
      <app-statistics-data></app-statistics-data>
      <div class="row mb-3">
        <div class="col-sm-12 col-md-12 col-lg-12">
          <div class="row mb-3">
            <div class="col-md-2 col-sm-12 mb-0 pr-md-0">
              <ul class="nav nav-pills flex-column side-tabs" id="myTab" role="tablist">
                <li class="nav-item">
                  <a class="nav-link active" data-toggle="tab" href="#info" role="tab" aria-controls="info"
                     aria-selected="true">Hierarchy info</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" data-toggle="tab" href="#user" role="tab" aria-controls="user"
                     aria-selected="true">User defined</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" data-toggle="tab" href="#responsibilities" role="tab" aria-controls="home"
                     aria-selected="true">Responsibilities</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" data-toggle="tab" href="#subordinates" role="tab" aria-controls="home"
                     aria-selected="true">Subordinates</a>
                </li>

                <li class="nav-item">
                  <a class="nav-link" data-toggle="tab" href="#profile" role="tab" aria-controls="profile"
                     aria-selected="false">Linked Objects</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" data-toggle="tab" href="#home" role="tab" aria-controls="home"
                     aria-selected="true">Linked KPI's</a>
                </li>
              </ul>
            </div>
            <div class="col-md-10 col-sm-12">
              <div class="tab-content" id="myTabContent">
                <div class="tab-pane fade show active" id="info" role="tabpanel" aria-labelledby="home-tab">
                  <app-hierarchy-info></app-hierarchy-info>
                </div>


                <div class="tab-pane fade" id="user" role="tabpanel" aria-labelledby="home-tab">
                  <app-user-defined></app-user-defined>
                </div>

                <div class="tab-pane fade" id="responsibilities" role="tabpanel" aria-labelledby="home-tab">
                  <app-responsibilities></app-responsibilities>
                </div>
                <div class="tab-pane fade" id="subordinates" role="tabpanel" aria-labelledby="home-tab">
                  <app-subordinates></app-subordinates>
                </div>


                <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
                  <app-linked-objects></app-linked-objects>
                </div>
                <div class="tab-pane fade" id="home" role="tabpanel" aria-labelledby="home-tab">
                  <app-linked-kpis></app-linked-kpis>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row mb-4">
        <div class="col-sm-12">
          <button type="button" class="btn icon-btn advance-search float-right ml-3 btn-width" data-toggle="collapse"
                  data-target="#advanceSearch" aria-expanded="true">
            Edit
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!--KPI Chart-->
<script>
  Highcharts.chart('KPI', {
    chart: {
      backgroundColor: '#FAFEFF',
    },
    title: {
      text: ''
    },

    subtitle: {
      text: ''
    },

    yAxis: {
      title: {
        text: ''
      }
    },

    xAxis: {
      accessibility: {
        rangeDescription: ''
      }
    },

    legend: {
      layout: 'vertical',
      align: 'right',
      verticalAlign: 'middle'
    },

    plotOptions: {
      series: {
        label: {
          connectorAllowed: false
        },
        pointStart: 2012
      }
    },

    series: [{
      name: 'KPI',
      data: [10, 22, 31, 38, 44, 56, 79, 85]
    }],

    responsive: {
      rules: [{
        condition: {
          maxWidth: 500
        },
        chartOptions: {
          legend: {
            layout: 'horizontal',
            align: 'center',
            verticalAlign: 'bottom'
          }
        }
      }]
    }

  });
</script>

<!--Linked Objects-->
<script>
  var mainObj = "#E36537",
    blueColor = "#6da0bf";

  Highcharts.chart('obj', {

    chart: {
      type: 'networkgraph',
      marginTop: 0,
      backgroundColor: '#FAFEFF',
    },

    title: {
      text: ''
    },

    subtitle: {
      text: ''
    },

    plotOptions: {
      networkgraph: {
        keys: ['from', 'to'],
        layoutAlgorithm: {
          enableSimulation: true,
          integration: 'verlet',
          linkLength: 100
        }
      }
    },

    series: [{
      marker: {
        radius: 13,
      },
      dataLabels: {
        enabled: true,
        linkFormat: '',
        allowOverlap: true
      },
      data: [
        ['Object name goes here', 'Object1'],
        ['Object name goes here', 'Object2'],
        ['Object name goes here', 'Object3'],
        ['Object name goes here', 'Object4'],
        ['Object name goes here', 'Object5'],
        ['Object name goes here', 'Object6'],
        ['Object name goes here', 'Object7'],
        ['Object name goes here', 'Object8']
      ],
      nodes: [{
        id: 'Object name goes here',
        color: mainObj
      },
        {
          id: 'Object1',
          color: blueColor
        }, {
          id: 'Object2',
          color: blueColor
        }, {
          id: 'Object3',
          color: blueColor
        }, {
          id: 'Object4',
          color: blueColor
        }, {
          id: 'Object5',
          color: blueColor
        }, {
          id: 'Object6',
          color: blueColor
        }, {
          id: 'Object7',
          color: blueColor
        }, {
          id: 'Object8',
          color: blueColor
        }]
    }]
  });

</script>

<!--Kpi table-->
<script>
  Highcharts.SparkLine = function (a, b, c) {
    var hasRenderToArg = typeof a === 'string' || a.nodeName,
      options = arguments[hasRenderToArg ? 1 : 0],
      defaultOptions = {
        chart: {
          renderTo: (options.chart && options.chart.renderTo) || this,
          backgroundColor: null,
          borderWidth: 0,
          type: 'area',
          margin: [2, 0, 2, 0],
          width: 120,
          height: 20,
          style: {
            overflow: 'visible'
          },

          // small optimalization, saves 1-2 ms each sparkline
          skipClone: true
        },
        title: {
          text: ''
        },
        credits: {
          enabled: false
        },
        xAxis: {
          labels: {
            enabled: false
          },
          title: {
            text: null
          },
          startOnTick: false,
          endOnTick: false,
          tickPositions: []
        },
        yAxis: {
          endOnTick: false,
          startOnTick: false,
          labels: {
            enabled: false
          },
          title: {
            text: null
          },
          tickPositions: [0]
        },
        legend: {
          enabled: false
        },
        tooltip: {
          hideDelay: 0,
          outside: true,
          shared: true
        },
        plotOptions: {
          series: {
            animation: false,
            lineWidth: 1,
            shadow: false,
            states: {
              hover: {
                lineWidth: 1
              }
            },
            marker: {
              radius: 1,
              states: {
                hover: {
                  radius: 2
                }
              }
            },
            fillOpacity: 0.25
          },
          column: {
            negativeColor: '#910000',
            borderColor: 'silver'
          }
        }
      };

    options = Highcharts.merge(defaultOptions, options);

    return hasRenderToArg ?
      new Highcharts.Chart(a, options, c) :
      new Highcharts.Chart(options, b);
  };

  var start = +new Date(),
    $tds = $('td[data-sparkline]'),
    fullLen = $tds.length,
    n = 0;

  // Creating 153 sparkline charts is quite fast in modern browsers, but IE8 and mobile
  // can take some seconds, so we split the input into chunks and apply them in timeouts
  // in order avoid locking up the browser process and allow interaction.
  function doChunk() {
    var time = +new Date(),
      i,
      len = $tds.length,
      $td,
      stringdata,
      arr,
      data,
      chart;

    for (i = 0; i < len; i += 1) {
      $td = $($tds[i]);
      stringdata = $td.data('sparkline');
      arr = stringdata.split('; ');
      data = $.map(arr[0].split(', '), parseFloat);
      chart = {};

      if (arr[1]) {
        chart.type = arr[1];
      }
      $td.highcharts('SparkLine', {
        series: [{
          data: data,
          pointStart: 1
        }],
        tooltip: {
          headerFormat: '<span style="font-size: 10px"> Q{point.x}:</span><br/>',
          pointFormat: '<b>{point.y}.000</b> USD'
        },
        chart: chart
      });

      n += 1;

      // If the process takes too much time, run a timeout to allow interaction with the browser
      if (new Date() - time > 500) {
        $tds.splice(0, i + 1);
        setTimeout(doChunk, 0);
        break;
      }

      // Print a feedback on the performance
      if (n === fullLen) {
        $('#result').html('Generated ' + fullLen + ' sparklines in ' + (new Date() - start) + ' ms');
      }
    }
  }

  doChunk();

</script>
